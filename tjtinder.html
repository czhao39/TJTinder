<html><head>
	<title>TJFriendr</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="http://polygit.org/components//webcomponentsjs/webcomponents.min.js"></script>
	<script src="require.js"></script>
	<script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
	<meta name="theme-color" content="#FF765A">
	<link rel="manifest" href="manifest.json">
	<script src="swregistration.js"> 
	</script>

	
	<link rel="import" href="http://polygit.org/components/polymer/polymer.html">
	<link rel="import" href="http://polygit.org/components/iron-ajax/iron-ajax.html">
	<link rel="import" href="http://polygit.org/components/paper-button/paper-button.html">
	<link rel="import" href="http://polygit.org/components/paper-input/paper-input.html">
	<link rel="import" href="http://polygit.org/components/paper-card/paper-card.html">
	<link rel="import" href="http://polygit.org/components/paper-toggle-button/paper-toggle-button.html">
	<link rel="import" href="http://polygit.org/components/paper-toolbar/paper-toolbar.html">
	<link rel="import" href="http://polygit.org/components/iron-a11y-keys/iron-a11y-keys.html">
	<link rel="import" href="http://polygit.org/components/paper-styles/paper-styles.html">
	
	<style is="custom-style">
		html{
			font-family: 'Roboto', sans-serif;
			font-size: 14px;
			margin: 0;

		}
		.pink {
		  --paper-card-header-color: "#FF765A";
		}		
		paper-toggle-button {
			--paper-toggle-button-label-color:"#FFFFFF";
		}
	</style>






</head>
<body>



	<!-- ______________________________________________________________ -->




	<dom-module id="app-main">

	<template>
			<style is="custom-style">
		html{
			font-family: 'Roboto', sans-serif;
			font-size: 14px;
			margin: 0;
			padding: 24px;
		}
		.pink {
		  --paper-card-header-color: #FF765A;
		}		
		paper-toggle-button {
			--paper-toggle-button-label-color:#FFFFFF;
		}
	</style>
		<iron-ajax auto="" url="https://ion.tjhsst.edu/api/profile" headers="{{loginauth}}" handle-as="json" on-response="loadAppMatches" debounce-duration="300" last-response="{{yourJSON}}"></iron-ajax>
		<template is="dom-if" if="{{iddefined}}">

			<iron-ajax auto="" url="{{profileurl}}" headers="{{loginauth}}" handle-as="json" on-error="pickIdFromAll" on-response="handleResponse" debounce-duration="300" last-response="{{theirJSON}}"></iron-ajax>

			<iron-ajax auto="" url="{{imgurl}}" headers="{{loginauth}}" last-response="{{imgret}}" handle-as="blob" on-error="pickIdFromAll" on-response="handleImgResponse" debounce-duration="300"></iron-ajax>
		</template>
		<template is="dom-if" if="{{readyForShownAjax}}">

			<iron-ajax auto="" url="{{shownURL}}" handle-as="json" on-response="shownreceived" debounce-duration="300" last-response="{{shownJSON}}"></iron-ajax>
		</template>
		<template is="dom-if" if="{{picturedefined}}">
			
			<div style="width:100%; margin:0 auto;text-align:center">

				
					<paper-card elevation="5" heading="{{theirJSON.display_name}}" image="{{imgObjectUrl}}" class="pink">

						<div class="card-actions">
							<paper-button on-tap="like" style="background-color:#FF765A;color: #fff;">Yah</paper-button>
							<paper-button on-tap="dislike" style="background-color:#FF765A;color: #fff;">Nah</paper-button>
						</div>
					</paper-card>
			</div>
	</template>



</template>
<script>
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('1V({1U:\'w-a\',1X:{5:{i:1Y,f:6},P:{i:Q,r:R,f:6},1j:{i:Q,r:R,f:6},Y:{i:J,f:6},12:{i:J,f:6},T:{i:J,f:6},x:{i:11,f:6},W:{i:J,f:6},1s:{i:Q,r:R,f:6}},1T:9(){},1Z:9(e){1 b=u s("c://m.n.p/b")1 q={}q[4.l.5]=6 b.o(q);4.W="c://m.n.p/h/"+4.l.5+"/X.20"2.3(4.W)4.1s=6 k.z("23").22="<w-K 5=\'"+4.l.5+"\'></w-K>"},21:9(e){1 1q=1o.25||1o.1P;1 S=1q.1S(4.1Q);1 1g=k.19("1R")1g.1W=S 4.T=S 2.3(4.T)4.1j=6},2i:9(e){1 U=4.l.5 1 8=4 y(4.1e!=2n){1 1k=11.1r(4.1e)2.3(1k)}L{2.3("2m N X")}1 g=u s("c://m.n.p");g.1a("r",9(j){2.3("2l y d<b")y(j.7("h").7(U).2k("d")){1 d=j.7("h").7(U).7("d").1h()}L{1 d=0}1 V=j.7("b").1h()y((d)<V){8.1p()}L{8.1J()}2.3("2o 1n:")2.3(d)2.3("2p 1n:")2.3(V)},9(G){2.3("1u 1y 1I: "+G.1G)})},1p:9(e){2.3("2r Z 26 N")1 8=4 1 g=u s("c://m.n.p");g.1a("r",9(j){1 1l=j.2q();1 b=11.1r(1l["b"])2.3("2j N:")2.3(b)8.5=b[F.1E(F.1w()*b.2b)];8.Y="c://B.D.C/E/A/"+8.5;8.12="c://B.D.C/E/A/"+8.5+"/1D";8.P=6 2.3("2a 5 Z b:")2.3(8.5)1 d=u s("c://m.n.p/h/"+8.l.5+"/d")1 q={}q[8.5]=6 2.3("")2.3("29 27: ")2.3(q)2.3("")d.o(q);10={}10[8.5]=6 u s("c://m.n.p/h/"+8.l.5+"/X").o(10)},9(G){2.3("1u 1y 1I: "+G.1G)})},1J:9(e){2.3("28 Z 1L 1L N")4.5=F.1E(F.1w()*(2c-1A))+1A 4.Y="c://B.D.C/E/A/"+4.5;4.12="c://B.D.C/E/A/"+4.5+"/1D";4.P=6},2g:9(e){2.3("2f 9 2e")1 v=4.l.5 1 t=4.1d.5 1 1F=4.l.1t 1 1x=4.1d.1t 1 1O="h/"+v+"/I"1 1c="h/"+t+"/I"1 1f="h/"+v+"/K"1 1M="h/"+t+"/K"1 g=u s("c://m.n.p/");1 1H=g.7(1f);1 1i=g.7(1M);1 16=g.7(1O);1 1K=g.7(1c);1K.1a("r",9(j){2.3("18: "+v)2.3("2h: "+t)1 15=j.7(v).2d();2.3(15)y(15==6){1 14={};14[t]=6;1 13={};13[1x]=6;1 1b={};1b[1F]=6;16.o(14);1H.o(13);1i.o(1b);2.3("18 1m 1v 1B I")}L{1 17={};17[t]=6;16.o(17);2.3("18 2t 2s 1m 1v 1B I")}});1 H=k.z("a");1 7=k.z("M");1 a=k.19("w-a");a.O("x",1N.1z(4.x))a.O("5","M")H.1C(a,7)},24:9(e){1 H=k.z("a");1 7=k.z("M");1 a=k.19("w-a");a.O("x",1N.1z(4.x))a.O("5","M")H.1C(a,7)}});',62,154,'|var|console|log|this|id|true|child|_this|function|main|regUsers|https|regUsersShown||notify|ref|uid|type|snapshot|document|yourJSON|tjtinder|firebaseio|update|com|updateObjRegUser|value|Firebase|them|new|you|app|loginauth|if|getElementById|profile|ion|edu|tjhsst|api|Math|errorObject|parent|likes|String|matches|else|mainid|users|setAttribute|iddefined|Boolean|false|imageUrl|imgObjectUrl|yourid|regUsersTotal|shownURL|shown|profileurl|from|updatedShown|Object|imgurl|updatedObjYourMatch|updatedObjLike|existInTheirLikes|yourLikesRef|updatedObj|You|createElement|once|updatedObjThemMatch|theirLikesUrl|theirJSON|shownJSON|yourMatchesUrl|image|numChildren|theirMatchesRef|picturedefined|shownKeys|alljson|exist|count|window|pickIdFromRegUsers|urlCreator|keys|readyForShownAjax|display_name|The|in|random|theirname|read|stringify|31416|their|replaceChild|picture|floor|yourname|code|yourMatchesRef|failed|pickIdFromAll|theirLikesRef|all|theirMatchesUrl|JSON|yourLikesUrl|webkitURL|imgret|img|createObjectURL|attached|is|Polymer|src|properties|Number|loadAppMatches|json|handleImgResponse|innerHTML|matchdiv|dislike|URL|reg|INFO|Picking|Update|Selected|length|33503|exists|called|Like|like|They|shownreceived|Registed|hasChild|Checking|No|null|Shown|Total|val|picking|not|do'.split('|'),0,{}))
</script>
</dom-module>



<!-- ______________________________________________________________ -->




<dom-module id="app-login">

<template>
	<paper-input label="Ion Username" value="{{user}}"></paper-input>
	<iron-a11y-keys id="a11y" target="[[target]]" keys="enter" on-keys-pressed="login"></iron-a11y-keys>
	<paper-input label="Ion Password" type="password" value="{{pass}}" id="passid"> 
</paper-input>
<br>
<br>
<paper-button on-tap="login" style="background-color:#FF765A;color: #fff;"> Log In </paper-button>
</template>

<script>

Polymer({
	is:"app-login",

	properties: {

		target: {
			type: Object,
			value: function() {
				return this.$.passid;
			}
		}
	},


	login: function(e){
		console.log("Logging in...")
		var beforeEncoding=this.user+":"+this.pass

		var base64=window.btoa(beforeEncoding);

		var authheader="Basic "+base64


						//create app-main element while passing in auth attribute
						var loginauthattr={}
						loginauthattr["Authorization"]=authheader
						var parent = document.getElementById("main");
						var child = document.getElementById("loginid");

						var main = document.createElement("app-main");
						main.setAttribute("loginauth", JSON.stringify(loginauthattr))
						main.setAttribute("id", "mainid")
						

						parent.replaceChild(main,child)
						
					}

				});
</script>
</dom-module>




<!-- ______________________________________________________________ -->





<dom-module id="app-matches">
	<template>
		<iron-ajax auto="" url="{{matchesurl}}" handle-as="json" on-response="displayResponse" debounce-duration="300" last-response="{{matchesJSON}}"></iron-ajax>

		<template is="dom-if" if="{{respReceived}}">
			<div style="width:100%; margin:0 auto;text-align:center">
				<br>
				<br>
				<br>
				<h2>
					Matches
				</h2>
				<template is="dom-repeat" items="{{_toArray(matchesJSON)}}">
					<span>{{item}}</span><br>
					
					<hr>
				</template>
			</div>
		</template>


	</template>
	<script>
	Polymer({

		is: 'app-matches',

		properties: {
			id:{
				type:Number,
				notify: true

			},
			respReceived:{
				type:Boolean,
				value:false,
				notify:true
			},

			matchesurl:{
				type:String,
				notify:true 
			}


		},
		ready:function(){

			this.matchesurl="https://tjtinder.firebaseio.com/uid/"+this.id+"/matches.json";
			console.log("Matches url: ")
			console.log(this.matchesurl)

		},

		displayResponse: function(){
			this.respReceived=true
			console.log("displaying response w matches")
		},

		_toArray: function(obj) {
			return Object.keys(obj)
		}



	});
	</script>

</dom-module>






<!-- ______________________________________________________________ -->





<dom-module id="app-super">
	<template>

		<paper-toolbar style="background-color:#FF765A">
		<paper-icon-button icon="arrow-back" onclick="goHome()">
		</paper-icon-button>

		<div class="title"> TJFriendr</div>
		<paper-toggle-button style="--paper-toggle-button-label-color:#FFFFFF" checked="{{showMats}}"><p style="color:white">View Matches</p></paper-toggle-button>
		</paper-toolbar>
		<br>


		<div id="main">
			<app-login id="loginid">
		</app-login>
		</div>

		<template is="dom-if" if="{{showMats}}">
			<div id="matchdiv">
			</div>
		</template>

	</template>
	<script>
		Polymer({
			is: 'app-super'
		});
	</script>
</dom-module>



<!-- ________________________________________________________________________ -->




<app-super></app-super>


</body></html>